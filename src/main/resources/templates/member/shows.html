<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Shows - Setlist</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div th:replace="fragments/navbar :: navbar"></div>
    
    <main class="content-container">
        <div class="page-header">
            <h1>Manage Shows</h1>
            <a th:href="@{/member/add-show}" class="btn btn-primary">Add New Show</a>
        </div>

        <div th:if="${accept}" class="message-accept">
            <p th:text="${accept}"></p>
        </div>
        <br>
    
        <form th:action="@{/member/shows}" method="get">
            <div class="search-bar">
                <input type="text" name="keyword" th:value="${keyword}" placeholder="Search shows by artist, venue, or date..." id="showSearch">
                <button type="submit" class="search-button btn-secondary" id="searchButton">Search</button>
            </div>
        </form>

        <div class="show-grid" th:if="${not #lists.isEmpty(events)}">
            <div class="show-card" th:each="events : ${events}">
                <div class="show-date">
                    <span class="day" th:text="${#temporals.format(events.eventDate, 'dd')}">01</span>
                    <span class="month" th:text="${#temporals.format(events.eventDate, 'MMM')}">JAN</span>
                    <span class="year" th:text="${#temporals.format(events.eventDate, 'yyyy')}">2024</span>
                </div>
                <div class="show-info">
                    <div class="venue-info">
                        <span class="venue" th:text="${events.eventName}">Show Name</span>
                        <span class="venue" th:text="${events.venueName}">Venue Name</span>
                        <span class="city" th:text="${events.cityName}">City</span>
                    </div>
                    <div class="card-actions">
                        <a th:href="@{/member/shows/{id}/edit(id=${events.idEvent})}" class="btn">Edit Show</a>
                        <a th:href="@{/member/shows/{id}/setlist(id=${events.idEvent})}" class="btn btn-primary">Manage Setlist</a>
                        <form th:action="@{/member/shows/{id}/delete(id=${events.idVenue})}" method="post" class="inline-form">
                            <button type="submit" style="background-color: red; color: white;" class="btn btn-danger" onclick="return confirm('Are you sure?')">Delete</button>
                        </form>
                    </div>
                </div>
                    
                </div>
                
            </div>
        </div>

        <div class="empty-state" th:if="${#lists.isEmpty(events)}">
            <p>No shows found. Add your first show!</p>
            <a th:href="@{/member/add-show}" class="btn btn-primary">Add Show</a>
        </div>
    </main>
</body>
</html>
